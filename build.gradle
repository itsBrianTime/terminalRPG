/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.4.2/userguide/building_java_projects.html
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'java'
    id 'application'
    id "com.github.spotbugs" version "4.5.1"
    id "checkstyle"
    id 'jacoco' 
    
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
    jcenter()
}

dependencies {
    // Use JUnit test framework.
    testImplementation 'junit:junit:4.13.2'
    // This dependency is used by the application.
    implementation 'com.google.guava:guava:30.1.1-jre'
    // Adding JSON dependency
    implementation 'org.json:json:20210307'

    //compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1'
}

application {
    // Define the main class for the application.
    mainClass = 'terminalrpg.App'
}

run {
    standardInput = System.in
}

test {
    finalizedBy jacocoTestReport // report is always generated after tests run
}

jacocoTestReport {
    dependsOn test // tests are required to run before generating the report
}

///////////////////////////////////////////////////////////////////////
// Configure Checkstyle
///////////////////////////////////////////////////////////////////////
 apply plugin: 'checkstyle'
 checkstyle {
   // Keep checkstyle a little quieter
   ignoreFailures = true
   showViolations = false
 }

 tasks.withType(Checkstyle) {
   reports {
     html.enabled = true
     xml.enabled = false
     configFile = 'config/checkstyle/checkstyle.xml' as File
   }
 }
 checkstyle {
     toolVersion = "8.45"
 }

///////////////////////////////////////////////////////////////////////
// Configure SpotBugs
///////////////////////////////////////////////////////////////////////
// To generate an HTML report instead of XML
 spotbugsMain {
     reports {
         xml.enabled = false
         html.enabled = true
     }
 }
 spotbugs {
     toolVersion = '4.0.0-beta4'
     ignoreFailures = true
     showProgress = true
     effort = 'max'
 }
